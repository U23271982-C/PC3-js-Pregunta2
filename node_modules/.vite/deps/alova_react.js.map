{
  "version": 3,
  "sources": ["../../alova/dist/stateshook/react.esm.js"],
  "sourcesContent": ["/**\n  * @alova/client 2.0.0 (https://alova.js.org)\n  * Document https://alova.js.org\n  * Copyright 2025 Scott hu. All Rights Reserved\n  * Licensed under MIT (git://github.com/alovajs/alova/blob/main/LICENSE)\n*/\n\nimport { noop, undefinedValue, isNumber, falseValue } from '@alova/shared';\nimport { useState, useRef, useCallback, useEffect, useMemo } from 'react';\n\nconst stateToData = (reactState) => (2 in reactState ? reactState[2] : reactState[0]);\nconst refCurrent = (ref) => ref.current;\nconst setRef = (ref, newVal) => {\n    ref.current = newVal;\n};\n// the react predefined hooks\nvar react = {\n    name: 'React',\n    create: initialValue => useState(initialValue),\n    export: stateToData,\n    dehydrate: stateToData,\n    update: (newVal, state) => {\n        // update value synchronously so that we can access the new value synchronously.\n        state[2] = newVal;\n        state[1](newVal);\n    },\n    memorize: fn => {\n        // use `useCallback` to ensure the same reference, and refer the newest function with `useRef`\n        const fnRef = useRef(noop);\n        setRef(fnRef, fn);\n        return useCallback((...args) => refCurrent(fnRef)(...args), []);\n    },\n    ref: initialValue => {\n        const refObj = useRef(initialValue);\n        refCurrent(refObj) === undefinedValue && setRef(refObj, initialValue);\n        return refObj;\n    },\n    effectRequest({ handler, removeStates, immediate, watchingStates = [] }) {\n        // `handler` is called when some states change are detected\n        const oldStates = useRef(watchingStates);\n        useEffect(() => {\n            const oldStatesValue = refCurrent(oldStates);\n            // compare the old and new value, and get the index of changed state\n            let changedIndex = undefinedValue;\n            for (const index in watchingStates) {\n                if (!Object.is(oldStatesValue[index], watchingStates[index])) {\n                    changedIndex = Number(index);\n                    break;\n                }\n            }\n            setRef(oldStates, watchingStates);\n            if (immediate || isNumber(changedIndex)) {\n                handler(changedIndex);\n            }\n        }, watchingStates);\n        // remove states when component is unmounted\n        useEffect(() => removeStates, []);\n    },\n    computed: (getter, depList) => {\n        const memo = useMemo(getter, depList);\n        return [memo, noop];\n    },\n    watch: (states, callback) => {\n        // When there is a monitoring state, the state changes and then triggers\n        const needEmit = useRef(falseValue);\n        useEffect(() => {\n            needEmit.current ? callback() : (needEmit.current = true);\n        }, states);\n    },\n    onMounted: callback => {\n        useEffect(callback, []);\n    },\n    onUnmounted: callback => {\n        useEffect(() => callback, []);\n    }\n};\n\nexport { react as default };\n"],
  "mappings": ";;;;;;;;;;;;;;AAQA,mBAAkE;AAElE,IAAM,cAAc,CAAC,eAAgB,KAAK,aAAa,WAAW,CAAC,IAAI,WAAW,CAAC;AACnF,IAAM,aAAa,CAAC,QAAQ,IAAI;AAChC,IAAM,SAAS,CAAC,KAAK,WAAW;AAC5B,MAAI,UAAU;AAClB;AAEA,IAAI,QAAQ;AAAA,EACR,MAAM;AAAA,EACN,QAAQ,sBAAgB,uBAAS,YAAY;AAAA,EAC7C,QAAQ;AAAA,EACR,WAAW;AAAA,EACX,QAAQ,CAAC,QAAQ,UAAU;AAEvB,UAAM,CAAC,IAAI;AACX,UAAM,CAAC,EAAE,MAAM;AAAA,EACnB;AAAA,EACA,UAAU,QAAM;AAEZ,UAAM,YAAQ,qBAAO,IAAI;AACzB,WAAO,OAAO,EAAE;AAChB,eAAO,0BAAY,IAAI,SAAS,WAAW,KAAK,EAAE,GAAG,IAAI,GAAG,CAAC,CAAC;AAAA,EAClE;AAAA,EACA,KAAK,kBAAgB;AACjB,UAAM,aAAS,qBAAO,YAAY;AAClC,eAAW,MAAM,MAAM,kBAAkB,OAAO,QAAQ,YAAY;AACpE,WAAO;AAAA,EACX;AAAA,EACA,cAAc,EAAE,SAAS,cAAc,WAAW,iBAAiB,CAAC,EAAE,GAAG;AAErE,UAAM,gBAAY,qBAAO,cAAc;AACvC,gCAAU,MAAM;AACZ,YAAM,iBAAiB,WAAW,SAAS;AAE3C,UAAI,eAAe;AACnB,iBAAW,SAAS,gBAAgB;AAChC,YAAI,CAAC,OAAO,GAAG,eAAe,KAAK,GAAG,eAAe,KAAK,CAAC,GAAG;AAC1D,yBAAe,OAAO,KAAK;AAC3B;AAAA,QACJ;AAAA,MACJ;AACA,aAAO,WAAW,cAAc;AAChC,UAAI,aAAa,SAAS,YAAY,GAAG;AACrC,gBAAQ,YAAY;AAAA,MACxB;AAAA,IACJ,GAAG,cAAc;AAEjB,gCAAU,MAAM,cAAc,CAAC,CAAC;AAAA,EACpC;AAAA,EACA,UAAU,CAAC,QAAQ,YAAY;AAC3B,UAAM,WAAO,sBAAQ,QAAQ,OAAO;AACpC,WAAO,CAAC,MAAM,IAAI;AAAA,EACtB;AAAA,EACA,OAAO,CAAC,QAAQ,aAAa;AAEzB,UAAM,eAAW,qBAAO,UAAU;AAClC,gCAAU,MAAM;AACZ,eAAS,UAAU,SAAS,IAAK,SAAS,UAAU;AAAA,IACxD,GAAG,MAAM;AAAA,EACb;AAAA,EACA,WAAW,cAAY;AACnB,gCAAU,UAAU,CAAC,CAAC;AAAA,EAC1B;AAAA,EACA,aAAa,cAAY;AACrB,gCAAU,MAAM,UAAU,CAAC,CAAC;AAAA,EAChC;AACJ;",
  "names": []
}
